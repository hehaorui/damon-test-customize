diff --git a/perf/setup.sh b/perf/setup.sh
index 75dbdc6..34d44ad 100755
--- a/perf/setup.sh
+++ b/perf/setup.sh
@@ -43,4 +43,43 @@ fi
 cd parsec-benchmark
 ./configure
 ./get-inputs -n
-bash -c "source env.sh && parsecmgmt -a build"
+
+dirs=("pkgs/libs/gsl/src")
+for d in "${dirs[@]}"; do
+  wget -O "$d/config.guess" "https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD"
+  wget -O "$d/config.sub" "https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD"
+  chmod +x "$d/config.guess"
+  chmod +x "$d/config.sub"
+done
+
+# autoreconf need libtool to regenerate the build scripts
+sudo apt install -y libtool
+
+for dir in "${dirs[@]}"; do
+  echo ">>> Entering: $dir"
+  pushd "$dir" > /dev/null
+
+  echo ">>> Running autoupdate"
+  autoupdate || echo "Warning: autoupdate failed, continuing."
+
+  echo ">>> Running autoreconf -fi"
+  autoreconf -fi
+
+  popd > /dev/null
+done
+
+echo "=== All subprojects processed ==="
+
+# apply patch to parsec
+curl -fsSL "https://raw.githubusercontent.com/hehaorui/damon-test-patches/refs/heads/main/parsec-debian13-fix.diff" | git apply -p1 --3way
+
+# texinfo is required to build parsec
+sudo apt install -y texinfo
+
+bash -c '
+	source env.sh &&
+	env \
+		CFLAGS="$CFLAGS -Wno-error=incompatible-pointer-types -Wno-implicit-function-declaration -Wno-error=int-conversion -Wno-error=implicit-int" \
+		CXXFLAGS="$CXXFLAGS -Wno-error=incompatible-pointer-types" \
+		parsecmgmt -a build
+'
